<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Oofy</title>

    <!--Open Sans Font [ OPTIONAL ] -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;subset=latin" rel="stylesheet">

    <!--Bootstrap Stylesheet [ REQUIRED ]-->
    <link href="Pages/css/bootstrap.min.css" rel="stylesheet">

    <!--Nifty Stylesheet [ REQUIRED ]-->
    <link href="Pages/css/nifty.min.css" rel="stylesheet">

    <!--Font Awesome [ OPTIONAL ]-->
    <link href="Pages/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">

    <!--Switchery [ OPTIONAL ]-->
    <link href="Pages/plugins/switchery/switchery.min.css" rel="stylesheet">

    <!--Bootstrap Select [ OPTIONAL ]-->
    <link href="Pages/plugins/bootstrap-select/bootstrap-select.min.css" rel="stylesheet">

    <!--Demo [ DEMONSTRATION ]-->
    <link href="Pages/css/demo/nifty-demo.min.css" rel="stylesheet">

    <!--SCRIPT-->
    <!--=================================================-->

    <!--jQuery [ REQUIRED ]-->
    <script src="Pages/js/jquery-2.1.1.min.js"></script>

    <!--Dropzone [ OPTIONAL ]-->
    <link href="Pages/js/dropzone/dropzone.min.css" rel="stylesheet">

    <script src="Pages/js/d3.v5.min.js"></script>

    <script type="text/javascript">
        $(function () {
            Dropzone.options.data = {
                paramName: 'file',
                maxFilesize: 20, // MB
                maxFiles: 3,
                dictDefaultMessage: 'Drag an image here to upload, or click to select one',
                uploadMultiple: false,
                autoProcessQueue: true,
                headers: {
                    //'x-csrf-token': document.querySelectorAll('meta[name=csrf-token]')[0].getAttributeNode('content').value,
                },
                acceptedFiles: '.pdf',
                init: function () {
                    this.on('success', function (file, resp) {
                        var data = resp.csv;
                        console.log(data);
                        var parsedCSV = d3.csvParseRows(data);

                        var table = d3.select("#table_div").append("table").attr("class", "table table-striped table-bordered");

                        var tbody = table.append("tbody");
                        tbody.selectAll("tr")
                            .data(parsedCSV).enter()
                            .append("tr")
                            .selectAll("td")
                            .data(function (d) {
                                return d;
                            }).enter()
                            .append("td")
                            .text(function (d) {
                                return d;
                            });
                        d3.select("#head_1").attr("class", "");
                        d3.select("#head_2").attr("class", "active");
                        d3.select("#demo-lft-tab-1").attr("class", "tab-pane fade");
                        d3.select("#demo-lft-tab-2").attr("class", "tab-pane fade active in");
                    });
                    this.on("sending", function (file, xhr, formData) {
                        // Will send the filesize along with the file as POST data.
                        formData.append("filesize", file.size);
                    });
                }
            };
        });

    </script>
</head>
<body>

<!--Default Tabs (Left Aligned)-->
<!--===================================================-->
<div class="tab-base">

    <!--Panel heading-->
    <div class="panel-heading">
        <div class="panel-control">
            <!--Nav Tabs-->
            <ul class="nav nav-tabs">
                <li id="head_1" class="active">
                    <a data-toggle="tab" href="#demo-lft-tab-1">Upload Files</a>
                </li>
                <li id="head_2">
                    <a data-toggle="tab" href="#demo-lft-tab-2">Tables & Charts</a>
                </li>
            </ul>
        </div>
        <h3 class="panel-title">Oofy</h3>
    </div>

    <!--Tabs Content-->
    <div class="tab-content">
        <div id="demo-lft-tab-1" class="tab-pane fade active in">
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title">Upload Documents</h3>
                </div>
                <div class="panel-body">

                    <!--Dropzonejs-->
                    <!--===================================================-->
                    <form id="data" action="https://42q6iw44o2.execute-api.ap-southeast-1.amazonaws.com/api/upload"
                          method="post" class="dropzone">
                        <div class="dz-default dz-message">
                            <div class="dz-icon icon-wrap icon-circle icon-wrap-md">
                                <i class="fa fa-cloud-upload fa-3x"></i>
                            </div>
                            <div>
                                <p class="dz-text">Drop files to upload</p>
                                <p class="text-muted">or click to pick manually</p>
                            </div>
                        </div>
                        <div class="fallback">
                            <input name="file" type="file"/>
                        </div>
                    </form>
                    <!--===================================================-->
                    <!-- End Dropzonejs -->

                </div>
            </div>
        </div>
        <div id="demo-lft-tab-2" class="tab-pane fade">
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title">Tables & Charts</h3>
                </div>
                <div class="panel-body">
                    <!--Stacked Tabs Left-->
                    <!--===================================================-->
                    <div class="tab-base tab-stacked-left">
                        <!--Nav tabs-->
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a data-toggle="tab" href="#demo-stk-lft-tab-1">Tables</a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#demo-stk-lft-tab-2">Charts</a>
                            </li>
                        </ul>

                        <!--Tabs Content-->
                        <div class="tab-content">
                            <div id="demo-stk-lft-tab-1" class="tab-pane fade active in">
                                <!-- Basic Data Tables -->
                                <!--===================================================-->
                                <div class="panel">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Statements</h3>
                                    </div>
                                    <div class="panel-body" id="table_div">
                                    </div>
                                </div>
                                <!--===================================================-->
                                <!-- End Striped Table -->
                            </div>
                            <div id="demo-stk-lft-tab-2" class="tab-pane fade">
                                <h4 class="text-thin">Charts</h4>
                                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--===================================================-->
<!--End Default Tabs (Left Aligned)-->

<!--JAVASCRIPT-->
<!--=================================================-->

<script src="Pages/js/jquery-2.1.1.min.js"></script>

<!--Dropzone [ OPTIONAL ]-->
<script src="Pages/js/dropzone/dropzone.min.js"></script>

<!--BootstrapJS [ RECOMMENDED ]-->
<script src="Pages/js/bootstrap.min.js"></script>

<!--Nifty Admin [ RECOMMENDED ]-->
<script src="Pages/js/nifty.min.js"></script>

<!--JAVASCRIPT-->
<!--=================================================-->


<!--Fast Click [ OPTIONAL ]-->
<script src="Pages/plugins/fast-click/fastclick.min.js"></script>


<!--Nifty Admin [ RECOMMENDED ]-->
<script src="Pages/js/nifty.min.js"></script>


<!--Switchery [ OPTIONAL ]-->
<script src="Pages/plugins/switchery/switchery.min.js"></script>


<!--Bootstrap Select [ OPTIONAL ]-->
<script src="Pages/plugins/bootstrap-select/bootstrap-select.min.js"></script>


<!--Demo script [ DEMONSTRATION ]-->
<script src="Pages/js/demo/nifty-demo.min.js"></script>


</body>
</html>